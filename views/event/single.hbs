

{{#with event}}
{{> eventitem }}

<p>Start : {{startDate}}</p>

<div class="event-details">
  <p>Created by: {{creator.name}} on {{createdDate}}</p>
  <!--span>Latitude: {{location.coordinates.[1]}}</span>
  <span>Longitude: {{location.coordinates.[0]}}</span--> 
  <p>Last updated: {{updatedDate}}</p>
  <h2>Location: </h2>
  <p>Address: {{address}}</p>
{{/with}}
  
</div>
<div id="map-container"></div>

{{#if event.owner}}
<form action="/event/{{event._id}}/edit">
  <button>Edit or Remove this Event</button>
</form>
{{/if}}

<script>
  function initMap() {
    const event = {{{json event}}};
    const eventLat = event.location.coordinates[1]
    const eventLng = event.location.coordinates[0]
    //console.log(event.location.coordinates); 
    const $mapContainer = document.getElementById('map-container');

    const map = new window.google.maps.Map($mapContainer, {
      center: {lat: eventLat, lng: eventLng },
      zoom: 14
    });

    const marker = new window.google.maps.Marker({
      map,
      position: {
        lat: eventLat,
        lng: eventLng
      }
    });

    //console.log(marker);
  }

</script>

{{> mapscript}}

